<!DOCTYPE html>
<html>
<head>
  <title>IdP Task 1 - Attribute Release/Filtering</title>
</head>
<body>


<h1>Task 1 - Attribute Release/Filtering</h1>

<p>
  In order for the Identity Provider to release an attribute, a filter needs to be defined with the ID of the attribute and for which service(s) the attribute is released.
</p>

<p>
  You can find detailed information about Attribute Filtering in the Shibboleth Wiki:<br />
  https://wiki.shibboleth.net/confluence/display/IDP30/AttributeFilterConfiguration<br />
  https://wiki.shibboleth.net/confluence/display/SHIB2/IdPAddAttributeFilter
</p>

<p>
  Don't forget to clear any browser session between every new try.
</p>

<h2>Release the displayName attribute to your SP</h2>

<ul>
  <li>
    <p>Checkout the branch for Task 1 from your Git Repository using your Git client or on the command line:</p>
    <code>git checkout Task1_Attribute_Filtering</code>
  </li>

  <li>
    <p>
    Have a look in <code>roles/idp/templates/attribute-filter.xml.j2</code>, where you will find an entry for releasing the mail attribute to an SP. Add an additional entry for displayName and redeploy.
    </p>
  </li>

  <li>
    <p>
    Go the SP (https://192.168.33.88) and click on the "Login via UbuntuNet Alliance (unIDa)" link. Make sure you see the displayName attribute.
    </p>
  </li>
</ul>


<h2>Extras</h2>

<ul>
  <li>How would change the policy to additionally release the attribute to the SP with the entityId <code>https://crm.example.net/shibboleth</code>?</li>
  <li>
    How would you reformulate the same policy so that it gets released to all SP in your Federation?<br />
    Hint: Have a look at the options for <code>PolicyRequirementRule</code>
  </li>
</ul>


<p>If you can't work out the solution, you can checkout Task 2 and have a look at the attribute-filter.xml.j2 file</p>
<code>
  git checkout Task2_Attribute_Resolving
  vi roles/idp/templates/attribute-filter.xml.j2
</code>

</body>
</html>